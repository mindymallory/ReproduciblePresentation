---
title: "Reproducible Research Practices for Economists"
author: "Mindy L. Mallory"
date: "October 24, 2017"
output:
  beamer_presentation: 
    theme: "Boadilla"
  
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```


## Questions for the Audience

## How many of your research folders look like this?


![Picking on Zhepeng](presentation-assets/picking-on-zhepeng.png)




## How many of you have a research work flow that looks like this?

![](presentation-assets/workflow.png)


## Questions for the Audience

\centering

How many of you would rather die than have to reproduce a table from a paper you published 2 years ago? \par




## Questions for the Audience


\centering
Do you wake up in a cold sweat dreaming that Reviewer number 2 asked you to update your data-set (perform robustness test, etc) and you couldn't even reproduce your original results? \par




## Questions for the Audience

\centering
Students, have you ever purposely obfuscated your code figuring if your professor can't follow it they can't criticize it? \par




## Questions for the Audience

\centering
Have you ever lost data between submission and being asked to revise and resubmit and then you had to go and REPURCHASE!!! said data? \par



##  Questions for the Audience 

\centering
Have you ever lost an entire paper due to the Word file becoming corrupted then you thought you salvaged the paper through document recovery but then it got rejected because you missed some weird characters from the file corruption and reviewer number 2 recommended rejecting your paper because the authors were 'careless' to allow the weird characters to remain the document? \par



## I can say yes to all of these questions! 

\centering
But I got tired of being nervous all the time! \par


##


\centering
  There is a better way!\par


## Reproducible research with R, RStudio, RMarkdown, Knitr, and Github

  + [R](https://www.r-project.org/) - is awesome statistical computing software (open source and free!)  
  
  
  + [Rstudio](https://www.rstudio.com/) - is an awesome integrated development environment (program making it convenient to work with R); also open source and free  


## Reproducible research with R, RStudio, RMarkdown, Knitr, and Github

  + [RMarkdown](http://rmarkdown.rstudio.com/) is a kind of markup language supported by RStudio that uses **Knitr** to weave statistical analysis and results into beautifully formatted documents.  
  
    + Written in plaintext, it understands latex code and documents can be rendered into many different output formats
        + PDF
        + Beamer
        + HTML
        + Word*


## Reproducible research with R, RStudio, RMarkdown, Knitr, and Github


  + Github - is a cloud-based repository that is great at versioning (it was designed by and for software developers)
      
      
## The Basics - Before Getting Started

+ Install [R](https://www.r-project.org/), [RStudio](https://www.rstudio.com/), [Git](https://git-scm.com/downloads), and [Gitkraken](https://www.gitkraken.com/)
+ Install the following packages in R by executing the following commands in the RStudio console:

```{r, echo = TRUE, eval=FALSE}
install.packages("xts")
install.packages("tseries")
install.packages("tsDyn")
install.packages("broom")
install.packages("vars")
```

      
## The Basics - Set up a clean, reproducible project repository

+ Create a new repository on Github.com
  + Choose a meaningful repository name
  + Be sure to initialize with a Readme file by clicking the checkbox (somehow it helps RStudio and GitHub set an initial connection)
  + After creating the repository
  
![](presentation-assets/github-create.png)

## The Basics - Set up a clean, reproducible project repository

+ After creating the repository, click 'Clone or Download' and copy the link to the repository. 

![](presentation-assets/clone.png)


## The Basics - Set up a clean, reproducible project repository

+ Open up RStudio and navigate through 'File' -> 'New Project'
+ Choose 'Version Control' -> 'Git'
+ Then paste the link you copied from github.com into 'Repository URL' and click 'Create Project'

![](presentation-assets/clone2.png)




## The Basics - Set up a clean, reproducible project repository

+ RStudio Rule #1 - use projects!  
  + Never change the working directory
  + Once you have created a project, the working directory is automatically set to this file path

![](presentation-assets/directory.png)



## The Basics - Put your raw data in the 'data' folder and never touch again 

![](presentation-assets/data-directory.png)

## The Basics - Organize Scripts

+ Document what each script does  
+ If your project requires an elaborate 'readme.txt' with instructions about which scripts to run and in what order, you probably need to automate this. 

![](presentation-assets/script.png)

## The Basics - Organize Scripts

+ Document what each script does  
+ If your project requires an elaborate 'readme.txt' with instructions about which scripts to run and in what order, you probably need to automate this. 


![](presentation-assets/script2.png)


## Data Analysis - Cleaning

Your analysis may involve 'cleaning' raw data. 

+ May be aggregating many individual files
+ Dealing with missing data
+ Merging two or many large datasets

This type of activity should be done by the `cleaning.R` script that takes raw data files and makes them useful.

If at all possibly, do not save intermediate cleaned data. Run scripts that build from raw data everytime so you know it is reproducible. 

*Look at cleaning.R*


## Data Analysis - Pretesting

Similarly, you may need to check for stationarity or do other common diagnostic tests that inform model choice. 

This file will take cleaned data from `cleaning.R` and perform diagnostics. The tests will create R objects that can be called an inserted into manuscript results.

*Look at pretesting.R*

## Data Analysis - Fit Main Model

Then, your main analysis can be performed in analysis.R. This script will fit model and the output will be R objects that can be inserted to display results directly into tables and text of your manuscript. 

*Look at analysis.R*

## Write Paper in RMarkdown

[RMarkdown](http://rmarkdown.rstudio.com/) is an easy to use way to create reproducible reports that can be rendered to many formats. 

+ Accepts Latex commands for math equations and other formatting
+ Supports reference management with bibtex
+ Excecute R scripts right in the document and incorporate the results into your document

*Look at manuscript.Rmd*

## Commit and Push to Github.com

Gitkraken is a nice interface for this. 


## Use 'Releases' to Mark Important Milestones in Paper's Progress


